---
import StoryblokComponent from "@storyblok/astro/StoryblokComponent.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import { getLiveStory, useStoryblokApi } from "@storyblok/astro";

const { slug } = Astro.params;

const storyblokApi = useStoryblokApi();

const { data } = await storyblokApi.getStory(slug, {
  version: "draft",
});

const liveStory = await getLiveStory(Astro);
const story = liveStory || data.story;
---

<BaseLayout>
  <StoryblokComponent blok={story?.content} />
</BaseLayout>
